<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Birthday Wish!</title> <!-- This will be updated by JS -->
    <meta name="description" content="A personalized birthday wish created with CandleWeb.">
    <meta name="keywords" content="birthday, cake, happy birthday, greetings, fireworks, personalized wishes, ecard">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content=""> <!-- JS will set this -->
    <meta property="og:title" content="A Birthday Wish!"> <!-- JS will set this -->
    <meta property="og:description" content="A special birthday message."> <!-- JS will set this -->
    <meta property="og:image" content="https://placehold.co/1200x630.png">
    <meta property="og:image:alt" content="A special birthday wish from CandleWeb.">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content=""> <!-- JS will set this -->
    <meta property="twitter:title" content="A Birthday Wish!"> <!-- JS will set this -->
    <meta property="twitter:description" content="A special birthday message."> <!-- JS will set this -->
    <meta property="twitter:image" content="https://placehold.co/1200x630.png">
    <meta property="twitter:image:alt" content="A special birthday wish from CandleWeb.">

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button id="start">START</button>
    <button id="startconsoledebug" style="display: none;">enable console logs</button>
    <button id="stopconsoledebug" style="display: none;">disable console logs</button>

    <div class="noite"></div>

    <div class="constelacao"></div>

    <div class="lua">
        <div class="textura"></div>
    </div>

    <div class="chuvaMeteoro"></div>

    <div class="floresta">
        <img src="bgTree.png" alt="" />
    </div>

    <div id="cake-holder">
        <h4 id="instructions">'Blow the candles'</h4>
        <div class="cake">
            <div class="plate"></div>
            <div class="layer layer-bottom"></div>
            <div class="layer layer-middle"></div>
            <div class="layer layer-top"></div>
            <div class="icing"></div>
            <div class="drip drip1"></div>
            <div class="drip drip2"></div>
            <div class="drip drip3"></div>
            <!-- Candles will be dynamically added here -->
        </div>
        <div class="text-center">
            <h5 class="cake-off" id="cake-greeting">üíñ Happy Birthday üíñ</h5>
            <p class="cake-off">üíù Wish you the best üíù</p>
        </div>
    </div>
   <!-- Greetings screen -->
    <div id="greetings-screen">
        <h1 id="greetings-title">Happy Birthday</h1>
        <!-- Fireworks here -->
    </div>
    <div id="popup" class="popup">
        <div class="popup-content">
            <h2 id="popup-main-title">Happy Birthday!</h2>
            <p id="popup-main-message"></p>
            <div class="popup-buttons">
                <button id="cancel-button">Cancel</button>
                <button id="ok-button">OK</button>
            </div>
        </div>
    </div>
     <!-- Cake pop-up -->
    <div id="cake-popup" class="popup">
        <div class="popup-content">
            <h2>Let's blow out the candles.</h2>
            <div class="popup-buttons">
                <button id="cake-cancel-button">Cancel</button>
                <button id="cake-ok-button">OK</button>
            </div>
        </div>
    </div>
    <div id="messages" class="messages">
        <!-- Birthday messages will be displayed here -->
    </div>

    <div id="final-popup" class="popup">
        <div class="popup-content">
            <h2>Shukriya Dekhne ke liye</h2>
            <p>Did you Liked it?</p>
            <div class="popup-buttons">
                <button id="rewatch-button">Re-watch</button>
                <button id="liked-button">Liked it</button>
            </div>
        </div>
    </div>
    <div id="secret-message" class="popup">
      <div class="popup-content">
          <h2>Secret Message</h2>
          <p id="secret-message-body"></p>
      </div>
    </div>
    <canvas id="c"></canvas>
    <audio id="birthday-audio" src="Blue.mp3" loop></audio>
    <script>
        const params = new URLSearchParams(window.location.search);
        const toName = params.get('toName') || 'Friend';
        const fromName = params.get('fromName') || 'A Friend';
        const message = params.get('message') || 'Wishing you a fantastic day filled with joy and happiness!';
        const closingMessages = decodeURIComponent(params.get('closingMessages') || '');
        const secretMessage = decodeURIComponent(params.get('secretMessage') || '');

        window.birthdayData = { toName, fromName, message, closingMessages, secretMessage };

        // --- SEO & Social Sharing Updates ---
        const pageTitle = `Happy Birthday ${toName}!`;
        const pageDescription = `A special birthday message for ${toName} from ${fromName}. Create your own at CandleWeb!`;
        const pageUrl = window.location.href;

        document.title = pageTitle;
        document.querySelector('meta[name="description"]').setAttribute('content', pageDescription);
        document.querySelector('meta[property="og:image:alt"]').setAttribute('content', `A birthday wish for ${toName}`);
        document.querySelector('meta[property="twitter:image:alt"]').setAttribute('content', `A birthday wish for ${toName}`);
        
        // Open Graph
        document.querySelector('meta[property="og:title"]').setAttribute('content', pageTitle);
        document.querySelector('meta[property="og:description"]').setAttribute('content', pageDescription);
        document.querySelector('meta[property="og:url"]').setAttribute('content', pageUrl);
        
        // Twitter
        document.querySelector('meta[property="twitter:title"]').setAttribute('content', pageTitle);
        document.querySelector('meta[property="twitter:description"]').setAttribute('content', pageDescription);
        document.querySelector('meta[property="twitter:url"]').setAttribute('content', pageUrl);


        // --- Update dynamic content ---
        const greetingsTitle = document.getElementById('greetings-title');
        if (greetingsTitle) {
            greetingsTitle.textContent = `Happy Birthday ${toName}`;
        }
        const cakeGreeting = document.getElementById('cake-greeting');
        if (cakeGreeting) {
            cakeGreeting.innerHTML = `üíñ Happy Birthday ${toName} üíñ`;
        }

        document.getElementById('popup-main-title').textContent = `Happy Birthday ${toName}!`;
        document.getElementById('popup-main-message').textContent = message;

        const secretMessageElement = document.getElementById('secret-message-body');
        const secretMessageContainer = document.getElementById('secret-message');
        if (secretMessageElement && secretMessageContainer) {
            if (window.birthdayData.secretMessage) {
                secretMessageElement.textContent = window.birthdayData.secretMessage;
            } else {
                secretMessageContainer.style.display = 'none'; // Hide if no message
            }
        }
    </script>
    <script src="main.js"></script>
</body>
</html>
